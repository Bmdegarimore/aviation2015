<!DOCTYPE html>

<html>
<head>
    <title>Casey's Design page</title>
    <style type="text/css">
      div#memory_board{
        background:#ccc;
        border: #999 1px solid;
        width: 600px;
        height: 580px;
        padding:24px;
        margin: 0px auto;
      }

      div#memory_board > div {
        background: url("images/memoryGameCard.png") no-repeat;
        background-size: 140px 140px;
        border:#000;
        width: 100px;
        height: 100px;
        float: left;
        margin: 5px;
        padding: 20px;
        cursor:pointer;
        text-align: center;
      }
      .menu{
        width: 100%;
      }

      #left{
        float:left;
      }

      #right{
        float:right;
      }
      img{
        height: 100px;
        width: 100px;
      }
      </style>
</head>

<body>
  <div id="main">
  </div>
  <div class = "menu">
    <div id="left">
      <a href="index.html">Menu</a>
    </div>
    <div id="right">
      <a id="resetId">Reset Game</a>
    </div>
  </div>
  
  <div id ="memory_board"></div>

<script src="script/sectionone.js"></script>
<script>
  var memory_array = [];
  var memory_values = [];
  var memory_tile_ids = [];
  var tiles_flipped = 0;

  // Import random set of four cards
  cardSet1 = getCard(Math.floor((Math.random() * 10) + 1));
                
  cardSet2 = getCard(Math.floor((Math.random() * 10) + 1));
  
  while(cardSet1 == cardSet2){
    cardSet2 = getCard(Math.floor((Math.random() * 10) + 1));
  }
            
  cardSet3 = getCard(Math.floor((Math.random() * 10) + 1));
 
  while(cardSet3 == cardSet2 || cardSet3 == cardSet1){
      cardSet3 = getCard(Math.floor((Math.random() * 10) + 1));
  }
  
  cardSet4 = getCard(Math.floor((Math.random() * 10) + 1));
  
  while(cardSet4 == cardSet2 || cardSet4 == cardSet1 || cardSet4 == cardSet3){
      cardSet4 = getCard(Math.floor((Math.random() * 10) + 1));
  }


  memory_array.push(cardSet1.image);
  memory_array.push(cardSet1.image);
  
  memory_array.push(cardSet2.image);
  memory_array.push(cardSet2.image);

  
  memory_array.push(cardSet3.image);
  memory_array.push(cardSet3.image);
  
  memory_array.push(cardSet4.image);
  memory_array.push(cardSet4.image);

  memory_array.push(cardSet1.image);
  memory_array.push(cardSet1.image);
  
  memory_array.push(cardSet2.image);
  memory_array.push(cardSet2.image);

  
  memory_array.push(cardSet3.image);
  memory_array.push(cardSet3.image);
  
  memory_array.push(cardSet4.image);
  memory_array.push(cardSet4.image);

  
  Array.prototype.memory_tile_shuffle = function(){
    var i = this.length, j, temp;
    while (--i > 0){
      j = Math.floor(Math.random() * (i+1));
      temp = this[j];
      this[j] = this[i];
      this[i] = temp;
    }
  }

  function newBoard(){
    tiles_flipped = 0;
    var output = "";
    memory_array.memory_tile_shuffle();
    for (var i = 0; i < memory_array.length; i++){
      output += '<div id = "title_' +i+ '" onClick="memoryFlipTile(this,\''+memory_array[i]+'\')"></div>';
    }
    document.getElementById('memory_board').innerHTML = output;
  }

  function memoryFlipTile(tile,val){
  if(tile.innerHTML == "" && memory_values.length < 2){
    tile.style.background = '#FFF';
    tile.innerHTML = '<img src= "' +val+ '">';
    if(memory_values.length == 0){
      memory_values.push(val);
      memory_tile_ids.push(tile.id);
    } else if(memory_values.length == 1){
      memory_values.push(val);
      memory_tile_ids.push(tile.id);
      if(memory_values[0] == memory_values[1]){
        tiles_flipped += 2;
        // Clear both arrays
        memory_values = [];
              memory_tile_ids = [];
        // Check to see if the whole board is cleared
        if(tiles_flipped == memory_array.length){
          alert("Congratulations!");
          document.getElementById('memory_board').innerHTML = "";
          newBoard();
        }
      } else {
        function flip2Back(){
            // Flip the 2 tiles back over
            var tile_1 = document.getElementById(memory_tile_ids[0]);
            var tile_2 = document.getElementById(memory_tile_ids[1]);
            tile_1.style.background = 'url(images/memoryGameCard.png) no-repeat';
            tile_1.style.backgroundSize = '140px 140px';
                  tile_1.innerHTML = "";
            tile_2.style.background = 'url(images/memoryGameCard.png) no-repeat';
            tile_2.style.backgroundSize = '140px 140px';
                  tile_2.innerHTML = "";
            // Clear both arrays
            memory_values = [];
                  memory_tile_ids = [];
        }
        setTimeout(flip2Back, 700);
      }
    }
  }
}

  window.addEventListener("load", newBoard(), false);

</script>

</body>
</html>